{"version":3,"sources":["../../src/build/load-entrypoint.ts"],"names":["loadEntrypoint","PACKAGE_ROOT","path","normalize","join","__dirname","TEMPLATE_FOLDER","TEMPLATES_ESM_FOLDER","entrypoint","replacements","injections","filepath","resolve","file","fs","readFile","count","replaceAll","_","fromRequest","importRequest","relative","replace","startsWith","Error","JSON","stringify","replaced","Set","RegExp","Object","keys","map","k","match","key","parse","add","matches","size","length","difference","filter","has","injected"],"mappings":"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"}